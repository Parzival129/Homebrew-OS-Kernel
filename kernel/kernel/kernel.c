#include <stdio.h>

#include <kernel/tty.h>
#include <kernel/gdt.h>
#include <kernel/idt.h>

void kernel_main(void) {
	terminal_initialize(); printf("[OK] terminal initialized\n");
	gdt_install(); printf("[OK] gdt installed\n");
	idt_install(); printf("[OK] idt installed\n");
	printf("nue kernel booted\n");
	printf("READY\n\n>_");

	// Tests the IDT exception handler with a division by 0 exception
	// __asm__ volatile ("movl $1, %%eax; xorl %%edx, %%edx; movl $0, %%ecx; divl %%ecx" ::: "eax", "ecx", "edx");
	
	for (;;) { // halts the program so it can observe IRQ interrupts for keyboard testing
		__asm__ volatile ("hlt");
	}
	//printf("I am going to do it. I have made up my mind. These are the first few words of the new‚Ä¶ the best ‚Ä¶ the Longest Text In The Entire History Of The Known Universe! This Has To Have Over 35,000 words the beat the current world record set by that person who made that flaming chicken handbooky thingy. I might just be saying random things the whole time I type in this so you might get confused a lot. I just discovered something terrible. autocorrect is on!! no!!! this has to be crazy, so I will have to break all the English language rules and the basic knowledge of the average human being. I am not an average human being, however I am special. no no no, not THAT kind of special ;). Why do people send that wink face! it always gives me nightmares! it can make a completely normal sentence creepy. imagine you are going to a friend‚Äôs house, so you text this: [ see you soon üôÇ ] seems normal, right? But what is you add the word semi to that colon? (Is that right? or is it the other way around) what is you add a lorry to that briquettes? (Semi-truck to that coal-on) anyway, back to the point: [ see you soon üòâ ]THAT IS JUST SO CREEPY! is that really your friend, or is it a creepy stalker watching your every move? Or even worse, is it your friend who is a creepy stalker? maybe you thought it was your friend, but it was actually your fri end (let me explain: you are happily in McDonalds, getting fat while eating yummy food and some random dude walks up and blots out the sun (he looks like a regular here) you can‚Äôt see anything else than him, so you can‚Äôt try to avoid eye contact. he finishes eating his cheeseburger (more like horseburgher(I learned that word from the merchant of Venice(which is a good play(if you can understand it(I can cause I got a special book with all the words in readable English written on the side of the page(which is kinda funny because Shakespeare was supposed to be a good poet but no-one can understand him(and he‚Äôs racist in act 2 scene1 of the play too))))))) and sits down beside you , like you are old pals (you‚Äôve never met him before but he looks like he could be in some weird cult) he clears his throat and asks you a very personal question. ‚Äúcan i have some French fries?‚Äù (I don‚Äôt know why there called French fries when I‚Äôve never seen a French person eat fries! all they eat it is stuff like baguettes and cr√™pes and rats named ratty-two-ee which is a really fun game on the PlayStation 2) And you think {bubbly cloud thinking bubble} ‚ÄúHahahahahhahahahahahahahaha!!!!!!!!!!!! Hehheheheheh‚Ä¶..heeeheehe..hehe‚Ä¶ sigh. I remember that i was just about to eat one of my fries when I noticed something mushy and moist and [insert gross color like green or brown] on the end of one of my fries! now I can give it to this NERD!! ‚Äù (yes he is a nerd because all he does all day is watch the extended editions of the hobbit, lord of the rings and star wars and eat fat cakes (what the heck is a fat cake? I think it might be like a Twinkie or something)and twinkies(wow so is doesn‚Äôt really matter which is which because he eats both(i may have just done that so I didn‚Äôt have to Google what a fat cake is (right now I am typing on my iPhone 3gs anyway, which has a broken antenna so i can‚Äôt get internet anyway (it‚Äôs actually a really funny story that i‚Äôll tell you sometime)))and sit in his man cave with his friend named Joe (an ACTUAL friend, not a fri end)and all Joe does is watch sports like football with bob and all bob does is gamble ferociously (don‚Äôt ask(it means he buys all those bags of chips that say ‚Äúwin a free monkey or something if you find a banana in your bag*‚Äù(if there is a little star it means there is fine print so I always check the back of the package) *flips over the package* okay, it says\n");
}
